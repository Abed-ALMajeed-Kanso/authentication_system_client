(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{3940:function(e,t,r){Promise.resolve().then(r.bind(r,542))},9538:function(e,t,r){"use strict";r.d(t,{a:function(){return n},d:function(){return o}});var a=r(1844),s=r(5784);let l=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{try{let e=localStorage.getItem("user");e&&o(JSON.parse(e))}catch(t){console.error("Failed to parse user data from localStorage",t),localStorage.removeItem("user")}finally{i(!1)}},[]),(0,s.useEffect)(()=>{try{r?localStorage.setItem("user",JSON.stringify(r)):localStorage.removeItem("user")}catch(e){console.error("Failed to save user data to localStorage",e)}},[r]),(0,a.jsx)(l.Provider,{value:{user:r,setUser:o,isLoading:n},children:t})},n=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useUser must be used within a UserProvider");return e}},542:function(e,t,r){"use strict";r.r(t);var a=r(1844),s=r(5784),l=r(1597),o=r(7097),n=r(2175),i=r(6310),c=r(9332),d=r(1607),u=r(4464),h=r(3678),m=r(9538);let x=i.Ry().shape({email:i.Z_().email("Invalid email address").required("Email is required"),password:i.Z_().required("Password is required")}),g=()=>{let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),f=(0,c.useRouter)(),{setUser:v}=(0,m.a)();(0,s.useEffect)(()=>{let e=async()=>{let{authenticated:e}=await (0,h.wt)();e?f.push("/Dashboard"):f.push("/")};e()},[]);let w=(0,n.TA)({initialValues:{email:"",password:"",rememberMe:!1},validationSchema:x,async onSubmit(e){t(""),i(!0);let r=await (0,h.x4)(e.email,e.password,v);r.success?f.push("/Dashboard"):t(r.message),i(!1)}});return(0,a.jsx)("div",{className:"flex flex-col justify-center items-center h-screen bg-gradient-to-br gap-1 from-cyan-300 to-sky-600",children:(0,a.jsxs)("div",{className:"px-7 py-4 shadow bg-white rounded-md flex flex-col gap-2 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Login"}),e&&(0,a.jsx)("div",{className:"text-red-600 mb-2",children:e}),(0,a.jsxs)("form",{onSubmit:w.handleSubmit,className:"w-full flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"relative flex flex-col",children:[(0,a.jsx)(o.Z,{labelText:"Email",value:w.values.email,onChange:w.handleChange,onBlur:w.handleBlur,name:"email",type:"email"}),w.touched.email&&w.errors.email&&(0,a.jsx)("div",{className:"text-red-600 text-sm ml-2",children:w.errors.email})]}),(0,a.jsxs)("div",{className:"relative flex flex-col",children:[(0,a.jsx)(o.Z,{labelText:"Password",value:w.values.password,onChange:w.handleChange,onBlur:w.handleBlur,name:"password",type:g?"text":"password"}),w.touched.password&&w.errors.password&&(0,a.jsx)("div",{className:"text-red-600 text-sm ml-2",children:w.errors.password}),(0,a.jsx)("button",{type:"button",onClick:()=>b(!g),className:"absolute right-3 top-[38px] text-gray-500",tabIndex:-1,children:g?(0,a.jsx)(d.Z,{size:20}):(0,a.jsx)(u.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"flex justify-center items-center mb-4",children:[(0,a.jsx)("input",{type:"checkbox",id:"rememberMe",name:"rememberMe",checked:w.values.rememberMe,onChange:w.handleChange,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),(0,a.jsx)(l.Z,{type:"submit",disabled:r,className:"w-full",children:r?"Logging in...":"Login"})]})]})})};t.default=g},3678:function(e,t,r){"use strict";r.d(t,{wt:function(){return i},x4:function(){return l},kS:function(){return n}});var a=r(7066);let s=a.Z.create({baseURL:"https://authentication-system-e8yz.onrender.com",withCredentials:!0}),l=async(e,t,r)=>{try{let a=await s.post("/login",{email:e,password:t});if(200!==a.status)return{success:!1,message:"Invalid credentials"};{let l=await o();return l&&r(l),{success:!0,data:a.data}}}catch(c){var n,i;return{success:!1,message:(null==c?void 0:null===(n=c.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||"Login failed. Please try again."}}},o=async()=>{try{let e=await s.get("/authenticated/profile");if(200===e.status)return e.data;throw Error("Failed to fetch profile data")}catch(t){throw console.error("Error fetching profile:",t),Error("Failed to fetch profile data")}},n=async e=>{try{let t=await s.post("/authenticated/logout");if(200===t.status)return e(null),{success:!0,message:t.data.message};return{success:!1,message:"Logout failed"}}catch(l){var r,a;return{success:!1,message:(null==l?void 0:null===(r=l.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Logout failed. Please try again."}}},i=async()=>{try{let e=await s.get("/check-auth");if(200===e.status&&e.data.user)return{authenticated:!0,user:e.data.user};return{authenticated:!1}}catch(t){return console.error("Error checking auth:",t),{authenticated:!1}}}},1597:function(e,t,r){"use strict";var a=r(1844);let s=e=>{let{className:t,children:r,variant:s,square:l,paddingLess:o,type:n="button",...i}=e;return(0,a.jsx)("button",{...i,type:n,className:"\n \n        ".concat((()=>{switch(s){case"primary":return"bg-violet-500 hover:bg-violet-700 text-white";case"danger":return"bg-red-500 hover:bg-red-700 text-white ";case"success":return"bg-green-500 hover:bg-green-700 text-white ";case"warning":return"bg-amber-500 hover:bg-amber-700 text-white ";case"outline-danger":case"outline-danger":return"bg-white text-red-500 border border-red-500 hover:text-white hover:bg-red-700  ";case"outline-success":return"bg-white text-green-500 border border-green-500 hover:text-white hover:bg-green-700  ";case"outline-warning":return"bg-white text-amber-400 border border-amber-500 hover:text-white hover:bg-amber-500  ";case"outline-primary":return"bg-white text-violet-500 border border-violet-500 hover:text-white hover:bg-violet-700  ";default:return"bg-violet-500 hover:bg-violet-700 hover:bg-gra text-white shadow shadow-violet-600/25 hover:shadow-violet-600/75"}})(),"  transition duration-500  ").concat(!o&&"py-2 px-4","  ").concat(!l&&"rounded-md"," active:scale-95 ").concat(t," "),children:r})};t.Z=s},7097:function(e,t,r){"use strict";var a=r(1844),s=r(5784);let l=s.forwardRef((e,t)=>{let{className:r,children:s,labelText:l,type:o="text",error:n,...i}=e;return(0,a.jsxs)("div",{className:r+" relative",children:[l&&(0,a.jsx)("label",{className:"block text-gray-600 mb-2 text-xs lg:text-sm xl:text-base",htmlFor:"txt",children:l}),(0,a.jsxs)("div",{className:"flex items-stretch",children:[(0,a.jsx)("input",{id:"txt",autoComplete:"off",type:o,ref:t,...i,className:"border border-slate-400 w-full block outline-none py-2 pl-4 pr-2 transition-all text-xs lg:text-sm xl:text-base bg-slate-50 focus:shadow focus:shadow-blue-500\n              disabled:border-gray-400 disabled:bg-gray-100 disabled:text-gray-600\n              ".concat(n?"border-red-500 animate-shake":"","\n              ").concat(s?"rounded-r-md":"rounded-md")}),s&&(0,a.jsx)("div",{className:"flex",children:s})]}),n&&(0,a.jsx)("p",{className:"text-red-600 text-right text-xs mt-1 animate-shake",children:n})]})});l.displayName="TextBox",t.Z=l}},function(e){e.O(0,[403,577,17,744],function(){return e(e.s=3940)}),_N_E=e.O()}]);